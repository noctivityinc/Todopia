!!! Strict
%html{html_attrs}
  
  %head
    %title
      = h(yield(:title) || "Untitled")
    %meta{"http-equiv"=>"Content-Type", :content=>"text/html; charset=utf-8"}/
    
    = stylesheet_link_tag 'compiled/public.css', :media => 'screen' 
    = stylesheet_link_tag 'compiled/print.css', :media => 'print' 
    = javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js", 'jquery.livequery', 'jquery.form', 'jquery.cookie', 'facebox', 'jquery.labelify', 'jquery.contextMenu', 'flash', 'GrowingInput', 'TextboxList', 'TextboxList.Autocomplete', 'jquery.qtip-1.0.0-rc3.min'
    = javascript_include_tag 'controllers/public/tag_groups', 'application', "controllers/#{params[:controller]}"
    = javascript_tag "var AUTH_TOKEN = encodeURIComponent(#{form_authenticity_token.inspect});" if protect_against_forgery?
        
    = yield(:head)
  
  %body
    #toolbar= render :partial => "layouts/toolbar"
        
    #container
      = yield

    :javascript
      var uservoiceOptions = {
        key: 'todopia',
        host: 'todopia.uservoice.com',
        forum: '52117',
        showTab: true,
        alignment: 'right',
        background_color:'#000',
        text_color: 'white',
        hover_color: '#06C',
        lang: 'en'
      };
  
      function _loadUserVoice() {
        if (window.fluid==undefined) {
        var s = document.createElement('script');
        s.setAttribute('type', 'text/javascript');
        s.setAttribute('src', ("https:" == document.location.protocol ? "https://" : "http://") + "cdn.uservoice.com/javascripts/widgets/tab.js");
        document.getElementsByTagName('head')[0].appendChild(s);
        }
      }
      _loadSuper = window.onload;
      window.onload = (typeof window.onload != 'function') ? _loadUserVoice : function() { _loadSuper(); _loadUserVoice(); };
